(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"049f":function(e,t,a){},"180e":function(e,t,a){"use strict";var n=a("bdc6"),r=a.n(n);r.a},"2a97":function(e,t,a){"use strict";var n=a("fda8"),r=a.n(n);r.a},"2ca4":function(e,t,a){},"356f":function(e,t,a){},"35ca":function(e,t,a){"use strict";var n=a("758b");t["a"]={login:function(e){return Object(n["a"])().post("login",e)},register:function(e){return Object(n["a"])().post("register",e)},getUser:function(e){return Object(n["a"])().get("user",{headers:{Authorization:e.token}})},hasPermiss:function(e){return Object(n["a"])().get("permiss/"+e.type+"/"+e.id,{headers:{Authorization:e.token}})}}},"4ea9":function(e,t,a){},"5b23":function(e,t,a){},"66e7":function(e,t,a){"use strict";var n=a("2ca4"),r=a.n(n);r.a},"674a":function(e,t,a){},"713b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"header",attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),a("q-toolbar-title",[e._v("\n        My Pipeline\n      ")])],1)],1),a("q-drawer",{attrs:{bordered:"","content-class":"nav"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-list",[a("q-item-label",{staticClass:"user",attrs:{header:""}},[e._v("\n        "+e._s(e.user.name)+"\n      ")]),e._l(e.essentialLinks,(function(t){return a("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))}))],2)],1),a("q-page-container",["calendar"===this.view?a("calendar"):e._e(),"clients"===this.view?a("clients"):e._e(),"client"===this.view?a("client"):e._e(),"proyect"===this.view?a("proyect"):e._e(),"phase"===this.view?a("phase"):e._e(),"reports"===this.view?a("reports",{attrs:{user:this.user}}):e._e()],1)],1)},r=[],o=(a("96cf"),a("c973")),i=a.n(o),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-item",{attrs:{clickable:"",tag:"a",target:"_blank"},on:{click:function(t){return e.goTo(e.link)}}},[e.icon?a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:e.icon}})],1):e._e(),a("q-item-section",[a("q-item-label",[e._v(e._s(e.title))]),a("q-item-label",{attrs:{caption:""}},[e._v("\n      "+e._s(e.caption)+"\n    ")])],1)],1)},c=[],l=a("9f21"),u={name:"EssentialLink",mixins:[l["a"]],props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}},d=u,p=a("2877"),m=a("66e5"),f=a("4074"),g=a("0016"),h=a("0170"),v=a("eebe"),y=a.n(v),k=Object(p["a"])(d,s,c,!1,null,null,null),b=k.exports;y()(k,"components",{QItem:m["a"],QItemSection:f["a"],QIcon:g["a"],QItemLabel:h["a"]});var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("Tareas")]),a("q-separator",{attrs:{inset:""}}),a("FullCalendar",{ref:"calendar",attrs:{events:e.events,config:e.config}})],1),a("div",{staticClass:"col-1"})])])},q=[],_=(a("fa91"),a("25cc")),C=a("758b"),w={addTask:function(e){return Object(C["a"])().post("task",e,{headers:{Authorization:e.token}})},getTasks:function(e){return Object(C["a"])().get("tasks/"+e.fase_id,{headers:{Authorization:e.token}})},getTasksByUser:function(e){return Object(C["a"])().get("tasks_user/"+e.usuario_id,{headers:{Authorization:e.token}})},getTask:function(e){return Object(C["a"])().get("task/"+e.id,{headers:{Authorization:e.token}})},editTask:function(e){return Object(C["a"])().post("modify_task",e,{headers:{Authorization:e.token}})}},S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información de la tarea"),a("q-icon",{attrs:{name:"timelapse"}})],1),a("b",[e._v("Nombre de la tarea:")]),e._v(" "+e._s(e.myTask.title)),a("br"),a("b",[e._v("Comentarios:")]),a("br"),e._v("\n          "+e._s(e.myTask.description)),a("br"),a("b",[e._v("Proyecto:")]),e._v(" "+e._s(e.myTask.proyecto)),a("br"),a("b",[e._v("Fase:")]),e._v(" "+e._s(e.myTask.fase)),a("br"),a("q-separator"),a("b",[e._v("Cliente:")]),e._v(" "+e._s(e.myTask.cliente)),a("br")],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}})],1)],1)],1)},$=[],Q=(a("cca6"),{data:function(){return{myTask:{}}},props:{task:{}},created:function(){this.myTask=Object.assign({},this.task)},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.myTask),this.hide()},onCancelClick:function(){this.hide()}}}),T=Q,O=(a("a1d9"),a("24e8")),P=a("f09f"),I=a("eb85"),R=a("4b7e"),D=a("9c40"),L=Object(p["a"])(T,S,$,!1,null,"f07efe6c",null),j=L.exports;y()(L,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QSeparator:I["a"],QCardActions:R["a"],QBtn:D["a"]});var A={name:"calendar",mixins:[l["a"]],components:{FullCalendar:_["a"]},data:function(){return{events:[],config:{}}},created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getCalendarInfo(),t.next=3,e.getEvents();case 3:case"end":return t.stop()}}),t)})))()},methods:{getEvents:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.activateLoading("Cargando"),t.next=3,w.getTasksByUser({usuario_id:localStorage.getItem("user"),token:localStorage.getItem("token")});case 3:for(a=t.sent,e.disableLoading(),n=a.data,r=0;r<n.length;r++)o={title:n[r].task_name,start:n[r].date,description:n[r].task_commentary,fase:n[r].fase_name,proyecto:n[r].proyecto_name,cliente:n[r].cliente_name,_id:n[r].task_id},e.events.push(o);case 7:case"end":return t.stop()}}),t)})))()},showEvent:function(e){this.$q.dialog({component:j,parent:this,task:e}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},getCalendarInfo:function(){var e=this,t={months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],daysLong:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],days:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],today:"Hoy",month:"Mes",week:"Semana",day:"Día",list:"Lista"};this.config={defaultView:"month",editable:!1,displayEventTime:!1,header:{left:"prev,today,next",right:"month,listMonth,basicWeek,basicDay"},buttonText:{today:t.today,month:t.month,week:t.week,day:t.day,listMonth:t.list},allDayDefault:!0,height:"auto",monthNames:t.months,monthNamesShort:t.monthsShort,dayNames:t.daysLong,dayNamesShort:t.days,eventTextColor:"white",eventClick:function(t){e.showEvent(t)},eventMouseover:function(e,t,a){},eventMouseout:function(e,t,a){}}}}},E=A,N=Object(p["a"])(E,x,q,!1,null,null,null),z=N.exports;y()(N,"components",{QSeparator:I["a"]});var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("\n                Clientes\n                "),a("q-btn",{staticStyle:{float:"right"},attrs:{color:"primary",icon:"add"},on:{click:e.agregar}})],1),a("q-separator",{attrs:{inset:""}}),a("q-table",{attrs:{dense:"",columns:e.columns,data:e.data,"row-key":"id","rows-per-page-label":"Registros",filter:e.filter},scopedSlots:e._u([{key:"body",fn:function(t){return a("q-tr",{staticStyle:{height:"50px"},attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),a("q-td",{key:"correo",attrs:{props:t}},[e._v(e._s(t.row.correo))]),a("q-td",{key:"action",attrs:{props:t}},[a("a",{staticClass:"text-blue",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.goTo("client/"+t.row.id)}}},[a("q-icon",{attrs:{size:"md",name:"edit"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("editar")])],1),a("a",{staticClass:"text-red",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.del(t.row.id)}}},[a("q-icon",{attrs:{size:"md",name:"delete"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("eliminar")])],1)])],1)}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1),a("div",{staticClass:"col-1"})])])},M=[],K=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información del cliente"),a("q-icon",{attrs:{name:"list"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.client.name,callback:function(t){e.$set(e.client,"name",t)},expression:"client.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Direccion"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.client.direccion,callback:function(t){e.$set(e.client,"direccion",t)},expression:"client.direccion"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Ciudad"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.client.ciudad,callback:function(t){e.$set(e.client,"ciudad",t)},expression:"client.ciudad"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Sector"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"analytics"}})]},proxy:!0}]),model:{value:e.client.sector,callback:function(t){e.$set(e.client,"sector",t)},expression:"client.sector"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Numero ventas"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"analytics"}})]},proxy:!0}]),model:{value:e.client.numeroventas,callback:function(t){e.$set(e.client,"numeroventas",t)},expression:"client.numeroventas"}}),a("div",{staticClass:"text-h6"},[e._v("\n              Información de contacto\n              "),a("q-icon",{attrs:{name:"contacts"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.client.contacto,callback:function(t){e.$set(e.client,"contacto",t)},expression:"client.contacto"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Cargo"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"folder_shared"}})]},proxy:!0}]),model:{value:e.client.cargo,callback:function(t){e.$set(e.client,"cargo",t)},expression:"client.cargo"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Celular"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"contact_phone"}})]},proxy:!0}]),model:{value:e.client.celular,callback:function(t){e.$set(e.client,"celular",t)},expression:"client.celular"}}),a("q-input",{attrs:{filled:"",color:"primary",type:"email",label:"Correo"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"contact_mail"}})]},proxy:!0}]),model:{value:e.client.correo,callback:function(t){e.$set(e.client,"correo",t)},expression:"client.correo"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)}),B=[],F={data:function(){return{client:{}}},props:{},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.client),this.hide()},onCancelClick:function(){this.hide()}}},Y=F,J=(a("2a97"),a("27f9")),U=Object(p["a"])(Y,K,B,!1,null,"4663b252",null),G=U.exports;y()(U,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QInput:J["a"],QCardActions:R["a"],QBtn:D["a"]});var V={addClient:function(e){return Object(C["a"])().post("client",e,{headers:{Authorization:e.token}})},getClients:function(e){return Object(C["a"])().get("clients/"+e.usuario_id,{headers:{Authorization:e.token}})},getClient:function(e){return Object(C["a"])().get("client/"+e.id,{headers:{Authorization:e.token}})},setClient:function(e){return Object(C["a"])().post("modify_client",e,{headers:{Authorization:e.token}})},delClient:function(e){return Object(C["a"])().post("delete_client/"+e.id,e,{headers:{Authorization:e.token}})}},W={name:"clients",mixins:[l["a"]],data:function(){return{filter:"",columns:[{name:"id",required:!0,label:"ID",align:"center",field:function(e){return e.id},sortable:!0},{name:"name",required:!0,label:"Nombre",align:"left",field:function(e){return e.name},sortable:!0},{name:"correo",required:!0,label:"Correo contacto",align:"left",field:function(e){return e.correo},sortable:!0},{name:"action",required:!0,label:"Acciones",align:"left",sortable:!0}],data:[]}},props:["user"],created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.activateLoading("Cargando"),t.next=3,e.getClients();case 3:e.disableLoading();case 4:case"end":return t.stop()}}),t)})))()},methods:{getClients:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.getClients({usuario_id:localStorage.getItem("user"),token:localStorage.getItem("token")});case 2:a=t.sent,e.data=a.data;case 4:case"end":return t.stop()}}),t)})))()},agregar:function(){var e=this;this.$q.dialog({component:G,parent:this}).onOk(function(){var t=i()(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.token=localStorage.getItem("token"),a.usuario_id=localStorage.getItem("user"),t.prev=2,t.next=5,V.addClient(a);case 5:n=t.sent,200===n.status?(e.goTo("client/"+n.data.client.id),e.alert("positive","Cliente agregado correctamente")):e.alert("negative","Problemas al agregar el cliento"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.alert("negative","Problemas al agregar el cliento");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},del:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.activateLoading("Cargando"),a.next=4,V.delClient({id:e,token:localStorage.getItem("token")});case 4:n=a.sent,200===n.status&&(t.getClients(),t.alert("positive","Eliminado correctamente")),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.alert("negative","Se presentó un error");case 11:t.disableLoading();case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},X=W,Z=a("eaac"),ee=a("bd08"),te=a("db86"),ae=a("05c0"),ne=Object(p["a"])(X,H,M,!1,null,null,null),re=ne.exports;y()(ne,"components",{QBtn:D["a"],QSeparator:I["a"],QTable:Z["a"],QTr:ee["a"],QTd:te["a"],QIcon:g["a"],QTooltip:ae["a"],QInput:J["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[a("q-form",{on:{submit:e.onSubmit}},[a("div",{staticClass:"text-h6 title",on:{click:function(t){e.infoClient=!e.infoClient}}},[e._v("Información del cliente: "+e._s(e.client.name))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.infoClient,expression:"infoClient"}]},[a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.client.name,callback:function(t){e.$set(e.client,"name",t)},expression:"client.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Direccion"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.client.direccion,callback:function(t){e.$set(e.client,"direccion",t)},expression:"client.direccion"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Ciudad"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.client.ciudad,callback:function(t){e.$set(e.client,"ciudad",t)},expression:"client.ciudad"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Sector"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"analytics"}})]},proxy:!0}]),model:{value:e.client.sector,callback:function(t){e.$set(e.client,"sector",t)},expression:"client.sector"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Numero ventas"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"analytics"}})]},proxy:!0}]),model:{value:e.client.numeroventas,callback:function(t){e.$set(e.client,"numeroventas",t)},expression:"client.numeroventas"}}),a("div",{staticClass:"text-h6"},[e._v("\n                  Información de contacto\n                  "),a("q-icon",{attrs:{name:"contacts"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.client.contacto,callback:function(t){e.$set(e.client,"contacto",t)},expression:"client.contacto"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Cargo"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"folder_shared"}})]},proxy:!0}]),model:{value:e.client.cargo,callback:function(t){e.$set(e.client,"cargo",t)},expression:"client.cargo"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Celular"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"contact_phone"}})]},proxy:!0}]),model:{value:e.client.celular,callback:function(t){e.$set(e.client,"celular",t)},expression:"client.celular"}}),a("q-input",{attrs:{filled:"",color:"primary",type:"email",label:"Correo"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"contact_mail"}})]},proxy:!0}]),model:{value:e.client.correo,callback:function(t){e.$set(e.client,"correo",t)},expression:"client.correo"}})],1),a("q-separator",{attrs:{inset:""}}),a("br"),a("center",[a("q-btn",{attrs:{label:"Guardar",type:"submit",color:"primary"}}),a("q-btn",{attrs:{color:"black",label:"Crear proyecto"},on:{click:e.agregar}})],1)],1),a("q-separator",{attrs:{inset:""}}),a("q-table",{attrs:{title:"Proyectos",dense:"",columns:e.columns,data:e.data,"row-key":"id","rows-per-page-label":"Registros",filter:e.filter},scopedSlots:e._u([{key:"body",fn:function(t){return a("q-tr",{staticStyle:{height:"50px"},attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),a("q-td",{key:"descripcion",attrs:{props:t}},[e._v(e._s(t.row.descripcion))]),a("q-td",{key:"action",attrs:{props:t}},[a("a",{staticClass:"text-blue",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.goTo("proyect/"+t.row.id)}}},[a("q-icon",{attrs:{size:"md",name:"edit"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("editar")])],1),a("a",{staticClass:"text-red",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.del(t.row.id)}}},[a("q-icon",{attrs:{size:"md",name:"delete"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("eliminar")])],1)])],1)}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1),a("div",{staticClass:"col-1"})])])},ie=[],se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información del proyecto"),a("q-icon",{attrs:{name:"list"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.proyect.name,callback:function(t){e.$set(e.proyect,"name",t)},expression:"proyect.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Descripcion",type:"textarea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"description"}})]},proxy:!0}]),model:{value:e.proyect.descripcion,callback:function(t){e.$set(e.proyect,"descripcion",t)},expression:"proyect.descripcion"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Linea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"linear_scale"}})]},proxy:!0}]),model:{value:e.proyect.linea,callback:function(t){e.$set(e.proyect,"linea",t)},expression:"proyect.linea"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Monto"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"analytics"}})]},proxy:!0}]),model:{value:e.proyect.monto,callback:function(t){e.$set(e.proyect,"monto",t)},expression:"proyect.monto"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)},ce=[],le={data:function(){return{proyect:{}}},props:{},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.proyect),this.hide()},onCancelClick:function(){this.hide()}}},ue=le,de=(a("7170"),Object(p["a"])(ue,se,ce,!1,null,"7848ff7f",null)),pe=de.exports;y()(de,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QInput:J["a"],QCardActions:R["a"],QBtn:D["a"]});var me={addProyect:function(e){return Object(C["a"])().post("proyect",e,{headers:{Authorization:e.token}})},getProyects:function(e){return Object(C["a"])().get("proyects/"+e.cliente_id,{headers:{Authorization:e.token}})},getProyect:function(e){return Object(C["a"])().get("proyect/"+e.id,{headers:{Authorization:e.token}})},getDaysProyect:function(e){return Object(C["a"])().get("days_proyect/"+e.id,{headers:{Authorization:e.token}})},getLastTask:function(e){return Object(C["a"])().get("last_task_proyect/"+e.id,{headers:{Authorization:e.token}})},getNextTask:function(e){return Object(C["a"])().get("next_task_proyect/"+e.id,{headers:{Authorization:e.token}})},setProyect:function(e){return Object(C["a"])().post("modify_proyect",e,{headers:{Authorization:e.token}})},delProyect:function(e){return Object(C["a"])().post("delete_proyect/"+e.id,e,{headers:{Authorization:e.token}})}},fe={name:"proyects",mixins:[l["a"]],data:function(){return{filter:"",client:{},infoClient:!1,columns:[{name:"id",required:!0,label:"ID",align:"center",field:function(e){return e.id},sortable:!0},{name:"name",required:!0,label:"Nombre",align:"left",field:function(e){return e.name},sortable:!0},{name:"descripcion",required:!0,label:"Descripción",align:"left",field:function(e){return e.descripcion},sortable:!0},{name:"action",required:!0,label:"Acciones",align:"left",sortable:!0}],data:[]}},props:["user"],created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.activateLoading("Cargando"),t.next=3,e.getClient(e.$route.params.id);case 3:return t.next=5,e.getProyects();case 5:e.disableLoading();case 6:case"end":return t.stop()}}),t)})))()},methods:{getProyects:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me.getProyects({cliente_id:e.$route.params.id,token:localStorage.getItem("token")});case 2:a=t.sent,e.data=a.data;case 4:case"end":return t.stop()}}),t)})))()},getClient:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V.getClient({id:e,token:localStorage.getItem("token")});case 2:n=a.sent,t.client=n.data;case 4:case"end":return a.stop()}}),a)})))()},agregar:function(){var e=this;this.$q.dialog({component:pe,parent:this}).onOk(function(){var t=i()(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.token=localStorage.getItem("token"),a.cliente_id=e.$route.params.id,t.prev=2,t.next=5,me.addProyect(a);case 5:n=t.sent,200===n.status?(e.goTo("proyect/"+n.data.proyect.id),e.alert("positive","Proyecto agregado correctamente")):e.alert("negative","Problemas al agregar el proyecto"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.alert("negative","Problemas al agregar el proyecto");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},onSubmit:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.client.token=localStorage.getItem("token"),t.next=4,V.setClient(e.client);case 4:a=t.sent,200===a.status&&(e.alert("positive","Tus cambios han sido guardados"),e.getProyects(e.$route.params.id)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.alert("negative","Error al guardar los cambios");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},del:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.activateLoading("Cargando"),a.next=4,me.delProyect({id:e,token:localStorage.getItem("token")});case 4:n=a.sent,200===n.status&&(t.getProyects(),t.alert("positive","Eliminado correctamente")),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.alert("negative","Se presentó un error");case 11:t.disableLoading();case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},ge=fe,he=(a("180e"),a("0378")),ve=Object(p["a"])(ge,oe,ie,!1,null,"494842cc",null),ye=ve.exports;y()(ve,"components",{QForm:he["a"],QInput:J["a"],QIcon:g["a"],QSeparator:I["a"],QBtn:D["a"],QTable:Z["a"],QTr:ee["a"],QTd:te["a"],QTooltip:ae["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!0===e.hasPermiss?a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("Proyecto")]),a("q-form",{on:{submit:e.onSubmit}},[a("div",{staticClass:"text-h6 title",on:{click:function(t){e.infoProyect=!e.infoProyect}}},[e._v("Información del proyecto: "+e._s(e.proyect.name))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.infoProyect,expression:"infoProyect"}]},[a("q-input",{attrs:{filled:"",color:"primary","bg-color":"white",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}],null,!1,1934979842),model:{value:e.proyect.name,callback:function(t){e.$set(e.proyect,"name",t)},expression:"proyect.name"}}),a("q-input",{attrs:{filled:"",color:"primary","bg-color":"white",label:"Descripcion",type:"textarea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"description"}})]},proxy:!0}],null,!1,736773578),model:{value:e.proyect.descripcion,callback:function(t){e.$set(e.proyect,"descripcion",t)},expression:"proyect.descripcion"}}),a("q-input",{attrs:{filled:"",color:"primary","bg-color":"white",label:"Linea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"linear_scale"}})]},proxy:!0}],null,!1,1610939286),model:{value:e.proyect.linea,callback:function(t){e.$set(e.proyect,"linea",t)},expression:"proyect.linea"}}),a("q-input",{attrs:{filled:"",color:"primary","bg-color":"white",label:"Monto"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"account_tree"}})]},proxy:!0}],null,!1,3894795188),model:{value:e.proyect.monto,callback:function(t){e.$set(e.proyect,"monto",t)},expression:"proyect.monto"}})],1),a("q-separator",{attrs:{inset:""}}),a("br"),a("center",[a("q-btn",{attrs:{label:"Guardar",type:"submit",color:"primary"}}),a("q-btn",{attrs:{label:"Generar fases",color:"dark"},on:{click:e.generatePhases}})],1)],1),a("br"),a("q-separator",{attrs:{inset:""}}),a("br"),a("q-table",{attrs:{title:"Fases",dense:"",columns:e.columns,data:e.data,"row-key":"id","rows-per-page-label":"Registros",filter:e.filter,pagination:{rowsPerPage:7}},scopedSlots:e._u([{key:"body",fn:function(t){return a("q-tr",{staticStyle:{height:"50px"},attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),a("q-td",{key:"commentary",attrs:{props:t}},[e._v(e._s(t.row.commentary))]),a("q-td",{key:"action",attrs:{props:t}},[a("a",{staticClass:"text-blue",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.goTo("phase/"+t.row.id)}}},[a("q-icon",{attrs:{size:"md",name:"add_task"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("Agregar tareas")])],1)])],1)}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}],null,!1,3508557297)}),a("br"),a("q-separator",{attrs:{inset:""}}),a("br"),a("div",{staticClass:"text-h4"},[e._v("Indicadores de seguimiento")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-xs-12"},[a("q-card",{staticClass:"my-card bg-indigo-10 text-white"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Tiempo del proyecto")]),a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.info1.days)+" dias desde primera tarea")])]),a("q-card-section",{staticClass:"indicador"},[a("b",[e._v("Fecha primera tarea:")]),e._v(" "+e._s(e.info1.date)),a("br"),a("b",[e._v("Última fase trabajada:")]),e._v(" "+e._s(e.info1.name_last_phase)+"\n                  ")]),a("q-separator",{attrs:{dark:""}}),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.goTo("phase/"+e.info1.last_phase.id)}}},[e._v("Ir a la última fase")])],1)],1)],1),a("div",{staticClass:"col-md-4 col-xs-12"},[a("q-card",{staticClass:"my-card bg-positive text-white"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Última tarea")]),a("div",{staticClass:"text-subtitle2"},[e._v("Nombre: "+e._s(e.info2.task_name))])]),a("q-card-section",{staticClass:"indicador"},[a("b",[e._v("Fecha:")]),e._v(" "+e._s(e.info2.task_date)),a("br"),a("b",[e._v("Fase:")]),e._v(" "+e._s(e.info2.name)+"\n                  ")]),a("q-separator",{attrs:{dark:""}}),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.goTo("phase/"+e.info2.id)}}},[e._v("Ir a la fase")])],1)],1)],1),a("div",{staticClass:"col-md-4 col-xs-12"},[a("q-card",{staticClass:"my-card bg-orange text-white"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Próxima tarea")]),a("div",{staticClass:"text-subtitle2"},[e._v("Nombre: "+e._s(e.info3.task_name))])]),a("q-card-section",{staticClass:"indicador"},[a("b",[e._v("Fecha:")]),e._v(" "+e._s(e.info3.task_date)),a("br"),a("b",[e._v("Fase:")]),e._v(" "+e._s(e.info3.name)+"\n                  ")]),a("q-separator",{attrs:{inset:""}}),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.goTo("phase/"+e.info3.id)}}},[e._v("Ir a la fase")])],1)],1)],1)])],1),a("div",{staticClass:"col-1"})])]):e._e()},be=[],xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información de la tarea"),a("q-icon",{attrs:{name:"timelapse"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.phase.name,callback:function(t){e.$set(e.phase,"name",t)},expression:"phase.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Comentario",type:"textarea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"description"}})]},proxy:!0}]),model:{value:e.phase.commentary,callback:function(t){e.$set(e.phase,"commentary",t)},expression:"phase.commentary"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Color",required:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"palette"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-color",{model:{value:e.phase.color,callback:function(t){e.$set(e.phase,"color",t)},expression:"phase.color"}})],1)],1)]},proxy:!0}]),model:{value:e.phase.color,callback:function(t){e.$set(e.phase,"color",t)},expression:"phase.color"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)},qe=[],_e={data:function(){return{phase:{}}},props:{},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.phase),this.hide()},onCancelClick:function(){this.hide()}}},Ce=_e,we=(a("953f"),a("7cbe")),Se=a("b498"),$e=Object(p["a"])(Ce,xe,qe,!1,null,"6371d044",null),Qe=$e.exports;y()($e,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QInput:J["a"],QPopupProxy:we["a"],QColor:Se["a"],QCardActions:R["a"],QBtn:D["a"]});var Te={getPhases:function(e){return Object(C["a"])().get("phases/"+e.proyecto_id,{headers:{Authorization:e.token}})},generatePhases:function(e){return Object(C["a"])().post("phases",e,{headers:{Authorization:e.token}})}},Oe={name:"proyect",mixins:[l["a"]],data:function(){return{proyect:{},infoProyect:!1,infoContact:!1,filter:"",columns:[{name:"id",required:!0,label:"ID",align:"center",field:function(e){return e.id},sortable:!0},{name:"name",required:!0,label:"Nombre",align:"left",field:function(e){return e.name},sortable:!0},{name:"commentary",required:!0,label:"Comentario",align:"left",field:function(e){return e.commentary},sortable:!0},{name:"action",required:!0,label:"Acciones",align:"left",sortable:!0}],data:[],hasPermiss:!1,info1:{},info2:{},info3:{}}},props:["user"],mounted:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.activateLoading("Cargando"),t.next=3,e.getProyect(e.$route.params.id);case 3:return t.next=5,e.getPermiss("proyect",e.$route.params.id);case 5:return e.hasPermiss=t.sent,t.next=8,e.getPhases(e.$route.params.id);case 8:return t.next=10,e.getDaysProyect(e.$route.params.id);case 10:return t.next=12,e.getLastTask(e.$route.params.id);case 12:return t.next=14,e.getNextTask(e.$route.params.id);case 14:e.organizarCards(),e.disableLoading();case 16:case"end":return t.stop()}}),t)})))()},methods:{organizarCards:function(){return i()(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,document.getElementsByClassName("indicador");case 2:for(t=e.sent,a=0,n=0;n<t.length;n++)a<=t[n].clientHeight&&(a=t[n].clientHeight);for(r=0;r<t.length;r++)document.getElementsByClassName("indicador")[r].style.minHeight=a+"px";case 6:case"end":return e.stop()}}),e)})))()},getProyect:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,me.getProyect({id:e,token:localStorage.getItem("token")});case 2:n=a.sent,t.proyect=n.data;case 4:case"end":return a.stop()}}),a)})))()},getPhases:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Te.getPhases({proyecto_id:e,token:localStorage.getItem("token")});case 3:n=a.sent,t.data=n.data,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.data=[];case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},getDaysProyect:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n,r,o,i,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me.getDaysProyect({id:e,token:localStorage.getItem("token")});case 3:n=a.sent,200===n.status&&(r=n.data,o=(new Date).getTime(),i=new Date(r.date).getTime(),s=o-i,c=parseInt(s/864e5),t.info1={date:r.date,days:c,last_phase:r.last_phase,name_last_phase:r.last_phase.name}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},getLastTask:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,me.getLastTask({id:e,token:localStorage.getItem("token")});case 2:n=a.sent,r=n.data,t.info2=r;case 5:case"end":return a.stop()}}),a)})))()},getNextTask:function(e){var t=this;return i()(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,me.getNextTask({id:e,token:localStorage.getItem("token")});case 2:n=a.sent,r=n.data,t.info3=r;case 5:case"end":return a.stop()}}),a)})))()},onSubmit:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.proyect.token=localStorage.getItem("token"),t.next=4,me.setProyect(e.proyect);case 4:a=t.sent,200===a.status&&(e.alert("positive","Tus cambios han sido guardados"),e.getPhases(e.$route.params.id)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.alert("negative","Error al guardar los cambios");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},generatePhases:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.dialog({component:Qe,parent:e}).onOk(function(){var t=i()(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.token=localStorage.getItem("token"),a.proyecto_id=e.$route.params.id,t.prev=2,t.next=5,Te.generatePhases(a);case 5:n=t.sent,200===n.status&&(e.alert("positive","La fase fue agregada"),e.getPhases(e.$route.params.id)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.alert("negative","Problemas al agregar el proyecto");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}));case 1:case"end":return t.stop()}}),t)})))()}}},Pe=Oe,Ie=(a("bc11"),a("a370")),Re=Object(p["a"])(Pe,ke,be,!1,null,"57d9a911",null),De=Re.exports;y()(Re,"components",{QForm:he["a"],QInput:J["a"],QIcon:g["a"],QSeparator:I["a"],QBtn:D["a"],QTable:Z["a"],QTr:ee["a"],QTd:te["a"],QTooltip:ae["a"],QCard:P["a"],QCardSection:Ie["a"],QCardActions:R["a"]});var Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),!0===e.hasPermiss?a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("\n                Tareas\n                "),a("q-btn",{staticStyle:{float:"right"},attrs:{color:"primary",icon:"add"},on:{click:e.agregar}})],1),a("q-separator",{attrs:{inset:""}}),a("q-table",{attrs:{title:"Tareas",dense:"",columns:e.columns,data:e.data,"row-key":"id","rows-per-page-label":"Registros",filter:e.filter,pagination:{rowsPerPage:7}},scopedSlots:e._u([{key:"body",fn:function(t){return a("q-tr",{staticStyle:{height:"50px"},attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),a("q-td",{key:"commentary",attrs:{props:t}},[e._v(e._s(t.row.commentary))]),a("q-td",{key:"date",attrs:{props:t}},[e._v(e._s(t.row.date))]),a("q-td",{key:"action",attrs:{props:t}},[a("a",{staticClass:"text-blue",staticStyle:{cursor:"pointer",padding:"5px"},on:{click:function(a){return e.edit(t.row)}}},[a("q-icon",{attrs:{size:"md",name:"edit"}}),a("q-tooltip",{attrs:{delay:1e3,offset:[0,10]}},[e._v("Editar")])],1)])],1)}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}],null,!1,3498325464)})],1):a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("No tienes permisos")])]),a("div",{staticClass:"col-1"})])])},je=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información de la tarea"),a("q-icon",{attrs:{name:"timelapse"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.task.name,callback:function(t){e.$set(e.task,"name",t)},expression:"task.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Comentario",type:"textarea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"description"}})]},proxy:!0}]),model:{value:e.task.commentary,callback:function(t){e.$set(e.task,"commentary",t)},expression:"task.commentary"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Fecha y hora",required:"",rules:[function(e){return!!e||"Tienes que llenar este campo"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.task.date,callback:function(t){e.$set(e.task,"date",t)},expression:"task.date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.task.date,callback:function(t){e.$set(e.task,"date",t)},expression:"task.date"}})],1)],1)]},proxy:!0}]),model:{value:e.task.date,callback:function(t){e.$set(e.task,"date",t)},expression:"task.date"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)},Ee=[],Ne={data:function(){return{task:{}}},props:{},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.task),this.hide()},onCancelClick:function(){this.hide()}}},ze=Ne,He=(a("66e7"),a("52ee")),Me=a("ca78"),Ke=Object(p["a"])(ze,Ae,Ee,!1,null,"22502e56",null),Be=Ke.exports;y()(Ke,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QInput:J["a"],QPopupProxy:we["a"],QDate:He["a"],QTime:Me["a"],QCardActions:R["a"],QBtn:D["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin barra"},[a("div",{staticClass:"form"},[a("div",{staticClass:"text-h6"},[e._v("Información de la tarea"),a("q-icon",{attrs:{name:"timelapse"}})],1),a("q-input",{attrs:{filled:"",color:"primary",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note_add"}})]},proxy:!0}]),model:{value:e.myTask.name,callback:function(t){e.$set(e.myTask,"name",t)},expression:"myTask.name"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Comentario",type:"textarea"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"description"}})]},proxy:!0}]),model:{value:e.myTask.commentary,callback:function(t){e.$set(e.myTask,"commentary",t)},expression:"myTask.commentary"}}),a("q-input",{attrs:{filled:"",color:"primary",label:"Fecha y hora",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.myTask.date,callback:function(t){e.$set(e.myTask,"date",t)},expression:"myTask.date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.myTask.date,callback:function(t){e.$set(e.myTask,"date",t)},expression:"myTask.date"}})],1)],1)]},proxy:!0}]),model:{value:e.myTask.date,callback:function(t){e.$set(e.myTask,"date",t)},expression:"myTask.date"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)},Ye=[],Je={data:function(){return{myTask:{}}},props:{task:{}},created:function(){this.myTask=Object.assign({},this.task)},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.myTask),this.hide()},onCancelClick:function(){this.hide()}}},Ue=Je,Ge=(a("9d82"),Object(p["a"])(Ue,Fe,Ye,!1,null,"102943fe",null)),Ve=Ge.exports;y()(Ge,"components",{QDialog:O["a"],QCard:P["a"],QIcon:g["a"],QInput:J["a"],QPopupProxy:we["a"],QDate:He["a"],QTime:Me["a"],QCardActions:R["a"],QBtn:D["a"]});var We={name:"phase",mixins:[l["a"]],data:function(){return{filter:"",columns:[{name:"id",required:!0,label:"ID",align:"center",field:function(e){return e.id},sortable:!0},{name:"name",required:!0,label:"Nombre",align:"left",field:function(e){return e.name},sortable:!0},{name:"commentary",required:!0,label:"Comentario",align:"left",field:function(e){return e.commentary},sortable:!0},{name:"date",required:!0,label:"Fecha",align:"left",field:function(e){return e.date},sortable:!0},{name:"action",required:!0,label:"Acciones",align:"left",sortable:!0}],data:[],hasPermiss:!1}},props:["user"],created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.activateLoading("Cargando"),t.next=3,e.getTasks();case 3:return t.next=5,e.getPermiss("phase",e.$route.params.id);case 5:e.hasPermiss=t.sent,e.disableLoading();case 7:case"end":return t.stop()}}),t)})))()},methods:{getTasks:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.getTasks({fase_id:e.$route.params.id,token:localStorage.getItem("token")});case 2:a=t.sent,e.data=a.data;case 4:case"end":return t.stop()}}),t)})))()},agregar:function(){var e=this;this.$q.dialog({component:Be,parent:this}).onOk(function(){var t=i()(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.token=localStorage.getItem("token"),a.fase_id=e.$route.params.id,t.prev=2,e.activateLoading("Cargando"),t.next=6,w.addTask(a);case 6:n=t.sent,e.disableLoading(),200===n.status?(e.getTasks(),e.alert("positive","Tarea agregada correctamente")):e.alert("negative","Problemas al agregar las tarea"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.alert("negative","Problemas al agregar la tarea");case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},edit:function(e){var t=this;this.$q.dialog({component:Ve,parent:this,task:e}).onOk(function(){var e=i()(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.token=localStorage.getItem("token"),e.prev=1,t.activateLoading("Cargando"),e.next=5,w.editTask(a);case 5:n=e.sent,t.disableLoading(),200===n.status?(t.getTasks(),t.alert("positive","Tarea modificada correctamente")):t.alert("negative","Problemas al modificar tarea"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.alert("negative","Problemas al modificar la tarea");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},del:function(e){return i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("deleting");case 1:case"end":return e.stop()}}),e)})))()}}},Xe=We,Ze=Object(p["a"])(Xe,Le,je,!1,null,null,null),et=Ze.exports;y()(Ze,"components",{QBtn:D["a"],QSeparator:I["a"],QTable:Z["a"],QTr:ee["a"],QTd:te["a"],QIcon:g["a"],QTooltip:ae["a"],QInput:J["a"]});var tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[a("div",{staticClass:"text-h4"},[e._v("Informes")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 col-xs-12"},[a("q-select",{attrs:{options:e.options,label:"Tipo de informe",required:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"report"}})]},proxy:!0}]),model:{value:e.informe.tipo,callback:function(t){e.$set(e.informe,"tipo",t)},expression:"informe.tipo"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"full-width",attrs:{label:"Agregar",type:"submit",color:"positive"},on:{click:e.generate}})],1)])]),a("div",{staticClass:"col-1"})])])},at=[],nt=(a("baa5"),{name:"calendar",mixins:[l["a"]],components:{},data:function(){return{informe:{},options:["Proyectos + fases"]}},created:function(){return i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},props:["user"],methods:{generate:function(){this.downloadFile("https://mypipeline.soft-corp.online/v1/export/"+this.user.id)},downloadFile:function(e){var t=document.createElement("a");t.href=e,t.download=e.substr(e.lastIndexOf("/")+1),t.click()}}}),rt=nt,ot=a("ddd8"),it=Object(p["a"])(rt,tt,at,!1,null,null,null),st=it.exports;y()(it,"components",{QSelect:ot["a"],QIcon:g["a"],QBtn:D["a"]});var ct=a("35ca"),lt=[{title:"Calendario",icon:"event",link:"calendar"},{title:"Clientes",icon:"business",link:"clients"},{title:"Informes",icon:"analytics",link:"reports"},{title:"Configuración",icon:"account_circle",link:"settings"},{title:"Salir",icon:"logout",link:"logout"}],ut={name:"MainLayout",mixins:[l["a"]],components:{EssentialLink:b,Calendar:z,Clients:re,Client:ye,Proyect:De,Phase:et,Reports:st},data:function(){return{leftDrawerOpen:!0,essentialLinks:lt,user:{}}},props:{view:{type:String,default:"calendar"}},created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:case"end":return t.stop()}}),t)})))()},methods:{getUser:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct["a"].getUser({token:localStorage.getItem("token")});case 3:a=t.sent,200===a.status?e.user=a.data.user:e.goTo("logout"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.goTo("logout");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},dt=ut,pt=a("4d5a"),mt=a("e359"),ft=a("65c6"),gt=a("6ac5"),ht=a("9404"),vt=a("1c1c"),yt=a("09e3"),kt=Object(p["a"])(dt,n,r,!1,null,null,null);t["default"]=kt.exports;y()(kt,"components",{QLayout:pt["a"],QHeader:mt["a"],QToolbar:ft["a"],QBtn:D["a"],QToolbarTitle:gt["a"],QDrawer:ht["a"],QList:vt["a"],QItemLabel:h["a"],QPageContainer:yt["a"]})},7170:function(e,t,a){"use strict";var n=a("4ea9"),r=a.n(n);r.a},"953f":function(e,t,a){"use strict";var n=a("049f"),r=a.n(n);r.a},"9d82":function(e,t,a){"use strict";var n=a("5b23"),r=a.n(n);r.a},"9f21":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("96cf");var n=a("c973"),r=a.n(n),o=a("cf57"),i=a("4515"),s=a("35ca"),c={data:function(){return{}},methods:{getPermiss:function(e,t){return r()(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s["a"].hasPermiss({type:e,id:t,token:localStorage.getItem("token")});case 2:return n=a.sent,a.abrupt("return",n.data.permiss);case 4:case"end":return a.stop()}}),a)})))()},alert:function(e,t){this.$q.notify({type:e,message:t})},goTo:function(e){this.$router.push("/"+e).catch((function(e){e._name}))},logout:function(){this.$session.destroy(),location.href="/login"},getToken:function(e){return e.token_type+" "+e.token},activateLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a={message:e};1===t?a.spinner=o["a"]:2===t&&(a.spinner=i["a"]),this.$q.loading.show(a)},disableLoading:function(){this.$q.loading.hide()}}}},a1d9:function(e,t,a){"use strict";var n=a("356f"),r=a.n(n);r.a},bc11:function(e,t,a){"use strict";var n=a("674a"),r=a.n(n);r.a},bdc6:function(e,t,a){},fda8:function(e,t,a){}}]);